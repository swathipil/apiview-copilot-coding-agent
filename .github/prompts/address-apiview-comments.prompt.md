---
mode: 'agent'
tools: ['CreatePullRequest', 'UpdatePullRequest', 'SearchRepositories'] # 'GetApiViewComments'
---

# APIView Comment Resolution and PR Workflow

Follow these steps to address APIView comments and create a pull request in the azure-sdk-for-<language> repositories or the azure-rest-api-specs repository:

## Step 1: Gather APIView Comments
- Retrieve APIView comments for the target package or module.
- If comments are provided as a JSON file, analyze the file for actionable feedback.
- If comments are not available, prompt the user to provide the APIView comments or a link to the APIView review.

## Step 2: Prepare for Code Changes
- As changes are being made, describe the step-by-step thought process for identifying the target repository and package.
- Identify the target remote repository, package, and branch. The comments may require changes to multiple repositories.
  - `azure-sdk-for-python`: https://github.com/Azure/azure-sdk-for-python
  - `azure-rest-api-specs`: https://github.com/Azure/azure-rest-api-specs/
- **Note:** The following rules apply when identifying the target repository and branch:
  - If the comments apply to a file in the `azure-sdk-for-<language>` repo, check the header for a line such as: "Code generated by Microsoft (R) Python Code Generator." This indicates that the changes should be applied to the TypeSpec or swagger file in the azure-rest-api-specs repo used for code generation.
      - Identify the target TypeSpec or swagger file.
      - Determine whether the changes can be applied to the TypeSpec based on current TypeSpec limitations. Otherwise, apply the change to handwritten `_patch.py` files in the `azure-sdk-for-<language>` repo.
  - If the code was not generated, it was handwritten and the changes should be made directly to the handwritten code in the `azure-sdk-for-<language>` repo.
- Fetch the target remote branch and create a new branch off the target branch.

## Step 3: Address APIView Comments
- For each comment, make the necessary code changes following Azure SDK and language-specific best practices.
- Ignore the `/build/` folder.
- Ensure code is maintainable and adheres to repository guidelines.

## Step 4: Commit and Push Changes
- Commit your changes with a clear message referencing the APIView comments addressed.
- Push the branch to the remote repository.

## Step 5: Create a Draft Pull Request
- Generate a draft pull request with a title such as `[WIP] Fix <package> APIView comments`.
- In the PR description, summarize the APIView comments addressed and any notable changes.
- Assign reviewers or labels as needed.
- Note: PRs can be created in either the azure-sdk-for-<language> repositories or the azure-rest-api-specs repository, depending on where the changes are required.

## Step 6: Finalize the Pull Request
- Once all comments are addressed and the PR is ready for review, update the PR title and description to remove `[WIP]` and reflect the completed work. DO keep status as draft.
- Notify reviewers for final review and merge.